version: 1
suite: example
model: gpt-4
policies:
  function_calling_gate:
    assertions:
      # Must call 'web_search' at least once
      - type: trace_must_call_tool
        tool_name: web_search
        min_calls: 1

      # Sequence: web_search -> calculator (contiguous)
      - type: trace_tool_sequence
        sequence:
          - web_search
          - calculator
        mode: exact

tests:
  - id: fc-trace-01
    policy: function_calling_gate
    input:
      prompt: "Search for weather in Amsterdam and multiply temperature by 2"
    expected:
      type: must_contain
      must_contain: ["40 degrees"]
