# Assay

MCP security linter. Finds problems, fixes them.

## Install

```bash
curl -fsSL https://getassay.dev/install.sh | sh
```

## Use

```bash
assay init          # creates assay.yaml
assay validate      # finds problems
assay fix           # fixes them
```

## What it blocks

- `exec`, `shell`, `bash`, `powershell` — no RCE
- file access outside `/app` and `/data` — no secrets leak
- sketchy tool descriptions — no prompt injection

## CI

```yaml
# .github/workflows/security.yml
name: MCP Security
on: [push, pull_request]
jobs:
  assay:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: curl -fsSL https://getassay.dev/install.sh | sh
      - run: assay validate
```

Fails the build if something's wrong. That's the point.

## Options

```bash
assay validate --format json     # for scripts
assay validate --format sarif    # for github security tab
assay fix --dry-run              # see what it would do
assay fix --yes                  # skip prompts
assay init --pack hardened       # strict mode (allowlist only)
```

## Exit codes

- `0` — clean
- `1` — issues found
- `2` — config error

## Example output

```
$ assay validate

✗ tool "run_command" matches denied pattern "exec*"
  → remove tool or add to allow list

✗ tool "read_file" can access "/etc/passwd"
  → restrict paths to /app/** or /data/**

2 issues found
```

```
$ assay fix

? Fix "run_command" by adding to deny exceptions? [y/n] n
? Fix "read_file" by restricting paths? [y/n] y

✓ Applied 1 fix to assay.yaml
```

## Config

```yaml
# assay.yaml (generated by assay init)
version: "1.0"
name: "mcp-default-gate"

allow:
  - "*"

deny:
  - "exec*"
  - "shell*"
  - "*bash*"

constraints:
  - tool: "read_file"
    params:
      path:
        matches: "^/app/.*|^/data/.*"
```

Edit it. It's just yaml.

## Docs

- [Policy packs](https://getassay.dev/docs/packs)
- [CI recipes](https://getassay.dev/docs/ci)
- [Config reference](https://getassay.dev/docs/config)

## Problems?

```bash
assay validate --verbose    # see what's happening
```

Still stuck? [Open an issue](https://github.com/assay-dev/assay/issues).

## License

MIT
