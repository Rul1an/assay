# Plan: DX Magnets & Open Core ‚Üí Paid Conversion

**Status:** Draft
**Context:** Synthesized from codebase DX audit + commercial structure analysis (Feb 2026)

---

## Diagnosis: Where the Friction Lives

### The problem in one sentence
The closed-loop workflow (observe ‚Üí generate ‚Üí profile ‚Üí lock ‚Üí gate ‚Üí evidence) exists as separate CLI commands, but there is no **guided flow** that gets a developer to "wow" in < 5 minutes. Each step requires knowledge of the next step.

### Concrete friction (measured in steps-to-value)

| Step | Current | Ideal |
|------|---------|-------|
| First validation | 4+ steps (capture trace, import, write config, `assay run`) | 2 steps (`init --from-trace`, `validate`) |
| First CI gate | Manual: config + workflow + trace + SARIF wiring | `assay init --ci` generates everything |
| First policy from behavior | `generate -i trace.jsonl` ‚Üí YAML output you must integrate yourself | Generate writes directly to `policy.yaml` + shows diff |
| Stabilize policy | 3 separate commands (profile init, update, generate) | One guided flow |
| Evidence bundle linting | Must know `--pack` exists + pack name | `assay lint` (discover packs, suggest) |

### DX bugs that undermine trust

1. **args.rs line 5-8**: Top-level help says `"CI-first PR regression gate for RAG pipelines (skeleton)"` ‚Äî "(skeleton)" sounds like an unfinished product
2. **init.rs line 102**: Success message says `"Run 'assay audit' to test"` but `assay audit` doesn't exist ‚Äî should be `validate` or `run`
3. **Quickstart**: `docs/getting-started/quickstart.md` and `docs/getting-started/index.md` contradict each other (`validate` vs `run`)

---

## DX Magnets: 6 Features That Drive Adoption

### Magnet 1: `assay init --from-trace` (Zero-to-Gate in 2 Commands)

**What it does:**
```bash
# Step 1: Import trace and generate everything
assay init --from-trace session.json

# Output:
# üîç Detected: MCP Inspector format (14 tool calls, 5 unique tools)
# ‚ú® Generated: assay.yaml (3 smoke tests)
# üìã Generated: policy.yaml (5 tools, deny-by-default)
# üèóÔ∏è Generated: .github/workflows/assay.yml
#
# ‚úÖ Ready. Run: assay validate

# Step 2: Validate
assay validate
# ‚úî 3/3 tests passed
```

**Why this is a magnet:**
- Drops time-to-value from ~30 min to < 2 min
- Generates a working CI pipeline that's immediately mergeable
- Generated policy is deny-by-default (security-first, not permissive)
- First output is a dopamine hit: green checkmarks

**Conversion hook:**
The generated `assay.yaml` contains a comment:
```yaml
# Generated by assay init. For compliance linting, add:
#   assay evidence lint --pack eu-ai-act-baseline bundle.tar.gz
# See: https://getassay.dev/packs
```

**Effort:** Medium (compose existing `import --init` + `generate` + `init --ci` logic)

### Magnet 2: `assay watch` (Live Feedback Loop)

**What it does:**
```bash
assay watch --trace trace.jsonl --config assay.yaml

# Watches trace file for changes, re-validates on every append
# ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
# ‚îÇ assay watch ¬∑ 12 events ¬∑ 3/3 passing   ‚îÇ
# ‚îÇ                                         ‚îÇ
# ‚îÇ Last tool call: read_file("/app/config") ‚îÇ
# ‚îÇ Policy: ‚úî allowed                       ‚îÇ
# ‚îÇ                                         ‚îÇ
# ‚îÇ Coverage: 5/7 tools seen (71%)          ‚îÇ
# ‚îÇ Missing: [execute_command, write_file]  ‚îÇ
# ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
```

**Why this is a magnet:**
- Direct feedback during agent development (inner loop)
- Developers see policy violations in real-time, not just in CI
- Coverage indicator makes untested tools visible
- "Hot reload" DX that developers know from web frameworks

**Conversion hook:**
Watch output includes:
```
üí° 2 tools not covered. Run: assay generate --profile to create stable policies
üìä For compliance scoring: assay evidence lint --pack eu-ai-act-baseline
```

**Effort:** Medium-High (file watcher + incremental validation + TUI output)

### Magnet 3: `assay explain` (Human-Readable Policy Violations)

**What it does:**
```bash
assay validate --config assay.yaml --trace trace.jsonl --format explain

# ‚ùå Test "args_valid_read_file" failed
#
# What happened:
#   Tool "read_file" was called with path="/etc/shadow"
#   Policy requires: path matches "^/app/.*|^/data/.*"
#
# Why this matters:
#   Reading /etc/shadow exposes system credentials.
#   This violates the filesystem containment policy.
#
# How to fix:
#   Option A: Update agent to use /app/ or /data/ paths
#   Option B: Add "/etc/shadow" to policy allowlist (not recommended)
#
# Related: EU AI Act Article 12(2)(c) ‚Äî logging of access patterns
```

**Why this is a magnet:**
- Makes Assay accessible to non-security-experts
- Every violation becomes a learning moment
- The "Related: EU AI Act" link is a soft upsell to compliance packs
- Copy-paste ready for PR comments and issue descriptions

**Conversion hook:**
The "Related" section always names relevant compliance articles. With baseline pack:
```
Related: EU AI Act Article 12(2)(c) ‚Äî logging of access patterns
         ‚ÑπÔ∏è For full Article 12 coverage: --pack eu-ai-act-baseline
         ‚ÑπÔ∏è For biometric & high-risk: --pack eu-ai-act-pro (enterprise)
```

**Effort:** Medium (explain command already exists in `commands/explain.rs`, extend with policy context)

### Magnet 4: Policy Diff Preview (`assay generate --diff`)

**What it does:**
```bash
assay generate -i new-trace.jsonl --diff policy.yaml

# Policy diff: policy.yaml
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# files.allow:
#   + /app/uploads/*.pdf        (seen 12x, stability: 0.92, risk: low)
#   + /tmp/cache/session_*.db   (seen 3x, stability: 0.67, risk: medium)
#
# network.allow_destinations:
#   + api.stripe.com:443        (seen 8x, stability: 1.0, risk: low)
#   ~ api.openai.com:443        (existing, seen 45x)
#
# ‚ö†Ô∏è needs_review (2):
#   ? /tmp/cache/session_*.db   (stability < 0.8, needs more runs)
#   ? 10.0.0.0/8:*              (internal network, high fanout)
#
# Apply? [y/N/edit]
```

**Why this is a magnet:**
- Makes policy evolution visible and controllable
- Developers trust tooling more when they can see what it does
- "needs_review" items with stability scores build understanding
- Interactive mode (`edit`) makes refinement natural

**Conversion hook:**
```
üìä Stability scores based on 3 runs. For higher confidence:
   assay profile update --profile profile.yaml -i trace.jsonl
   Recommended: 10+ runs for production policies
```
More profiling runs ‚Üí more traces ‚Üí more evidence ‚Üí compliance packs become more relevant.

**Effort:** Low-Medium (reformat generate output + diff against existing file)

### Magnet 5: PR Comment Bot (GitHub Action Enhancement)

**What it does:**
On every PR with agent changes, the Action posts a comment:

```markdown
## üîç Assay Policy Gate

| Check | Result | Details |
|-------|--------|---------|
| Tool schema validation | ‚úÖ Pass | 5/5 tools valid |
| Sequence rules | ‚úÖ Pass | No forbidden sequences |
| Regression vs baseline | ‚ö†Ô∏è New tool | `send_email` not in baseline |
| Compliance (eu-ai-act-baseline) | ‚úÖ 8/8 rules | |

### New Tool Detected: `send_email`
First seen in this PR. Parameters: `{to: string, subject: string, body: string}`

**Action required:** Add to policy allowlist or mark as denied.
```bash
# Allow:
assay policy allow send_email --config assay.yaml

# Deny:
assay policy deny send_email --config assay.yaml
```

<details>
<summary>Full SARIF report (12 findings)</summary>
...
</details>
```

**Why this is a magnet:**
- Every PR becomes a governance checkpoint without extra work
- "New tool detected" is the most actionable notification possible
- Copy-paste CLI commands lower the barrier to act
- Collapsible SARIF details for those who want to dig deeper
- Developers get used to the "assay check" in their PR flow

**Conversion hook:**
The compliance section shows baseline results for free, but:
```
üìã Compliance: eu-ai-act-baseline (8/8 rules)
   For extended coverage (Articles 12(3), 19, biometric): eu-ai-act-pro
   ‚ÑπÔ∏è https://getassay.dev/packs/eu-ai-act-pro
```

**Effort:** Medium (Action v2.1 is already planned; this adds PR comment formatting)

### Magnet 6: `assay doctor --fix` (Self-Healing Setup)

**What it does:**
```bash
assay doctor --fix

# üîç Scanning environment...
#
# ‚úÖ Assay v2.15.0
# ‚úÖ Config: assay.yaml (v2, suite: mcp-default-gate)
# ‚ö†Ô∏è Policy: policy.yaml references tool "search_docs" not seen in traces
#    ‚Üí Suggestion: run 'assay validate' with a trace containing search_docs
#
# ‚ùå Trace: trace.jsonl not found
#    ‚Üí Fixed: downloaded example trace from assay.yaml test definitions
#
# ‚ùå Baseline: .assay/baseline.json is older than 30 days
#    ‚Üí Fixed: regenerated baseline from latest run
#
# ‚ö†Ô∏è CI: .github/workflows/assay.yml missing SARIF upload step
#    ‚Üí Fixed: added SARIF upload step
#
# Summary: 2 fixed, 1 warning, 2 healthy
```

**Why this is a magnet:**
- Self-healing lowers support burden and frustration
- Developers trust tooling that can fix itself
- `--fix` is a familiar pattern (eslint --fix, cargo fix)
- Warning suggestions are educational without blocking

**Conversion hook:**
```
üí° Doctor tip: for continuous policy health monitoring across your team,
   see Managed Workflows: https://getassay.dev/enterprise/workflows
```

**Effort:** Medium (doctor already exists; --fix adds auto-remediation for known issues)

---

## Conversion Funnel: Open Core ‚Üí Paid

### Layer 1: Individual Developer (Free, OSS)

**Trigger:** Developer builds agent with MCP, wants to know if tool calls are correct.

**Journey:**
```
assay init --from-trace session.json     ‚Üê Magnet 1
assay validate                           ‚Üê First green checkmarks
assay watch --trace ...                  ‚Üê Magnet 2 (inner loop)
```

**Value:** Deterministic tests, zero LLM costs in CI, fewer flaky tests.

**Conversion signal:** Developer pushes `.github/workflows/assay.yml` to repo.

### Layer 2: Team Adoption (Free, OSS + Action)

**Trigger:** Team sees Assay checks in PRs, wants this for the entire project.

**Journey:**
```
GitHub Action v2 ‚Üí SARIF in Security tab
PR comment bot                           ‚Üê Magnet 5
assay generate --diff                    ‚Üê Magnet 4
Policy-as-code in repo (reviewed in PRs)
```

**Value:** Regression gating at team level, policy evolution visible in PRs.

**Conversion signal:** Multiple repos use Assay Action; team discusses policies in PRs.

**Upsell moment:** First time someone asks "but do we comply with the AI Act?" or "what if there's an audit?"

### Layer 3: Compliance Requirement (Paid ‚Üí Packs)

**Trigger:** EU AI Act deadline approaching (Aug 2026), SOC 2 audit planned, or customer asks for compliance evidence.

**Journey:**
```
assay evidence lint --pack eu-ai-act-baseline  ‚Üê Free baseline
  ‚Üí "8/8 rules pass, but baseline covers 30% of Article 12"
  ‚Üí "For full coverage: eu-ai-act-pro"

assay evidence lint --pack eu-ai-act-pro@1.2.0  ‚Üê Paid
  ‚Üí "22/24 rules pass"
  ‚Üí "Finding: ASSAY-E012 (Article 19 transparency)"
  ‚Üí Generates audit-ready SARIF report
```

**Value:** Structured compliance evidence that auditors understand. Article references, SARIF output, verifiable bundles.

**Pricing trigger:** Per-org subscription for enterprise packs via registry.

**Conversion amplifier (Magnet 3):** The `explain` output always names relevant compliance articles. Every violation a developer sees is a soft reminder that compliance packs exist.

### Layer 4: Enterprise Scale (Paid ‚Üí Platform)

**Trigger:** Multiple teams, multiple agents, audit trail needed across the organization.

**Journey:**
```
SIEM export (Splunk/Sentinel)            ‚Üê Evidence pipeline
Managed workflows                        ‚Üê Exception approvals, dashboards
SSO/SAML + RBAC                          ‚Üê Team management
Org-level pack namespaces                ‚Üê Custom compliance packs
```

**Value:** Centralized governance over all agent deployments. Audit trail flowing to existing GRC tooling.

**Pricing:** Enterprise contract (annual, per-org).

---

## Conversion Mechanics: How Free Pulls Toward Paid

### Principle: "Show the Gap"

Every free feature explicitly shows what would be better with the paid version. Not by blocking, but by informing.

### Concrete implementation per touch point

**1. CLI output (always)**
```
üìã Compliance: eu-ai-act-baseline (8/8 rules)
   Covers: Articles 12(1), 12(2)(a), 12(2)(b), 12(2)(c)
   Not covered: Articles 12(3), 19, 52  ‚Üí eu-ai-act-pro
```

**2. SARIF report (in GitHub Security tab)**
```json
{
  "runs": [{
    "tool": {
      "driver": {
        "name": "assay",
        "properties": {
          "pack": "eu-ai-act-baseline",
          "coverage": "30%",
          "upgrade": "eu-ai-act-pro covers 95% of Article 12"
        }
      }
    }
  }]
}
```

**3. PR comment bot**
```markdown
üìã Compliance: eu-ai-act-baseline (8/8)
   Coverage: Articles 12(1), 12(2)(a-c)
   [Upgrade to eu-ai-act-pro ‚Üí](https://getassay.dev/packs/eu-ai-act-pro)
```

**4. Evidence bundle metadata**
```json
{
  "lint": {
    "packs_applied": ["eu-ai-act-baseline"],
    "coverage_estimate": 0.30,
    "available_upgrades": ["eu-ai-act-pro@1.2.0"]
  }
}
```

**5. `assay doctor` output**
```
üìã Compliance readiness:
   ‚úÖ eu-ai-act-baseline installed (Articles 12(1-2))
   ‚ö†Ô∏è EU AI Act fully applicable from Aug 2, 2026
      Missing coverage: Articles 12(3), 19, 52
      ‚Üí assay registry install eu-ai-act-pro
```

### Principle: "Lock-in via Workflow, Not via Data"

- Evidence bundles are always exportable (open format, BYOS)
- Policies are YAML in your repo (portable)
- Lock-in lives in the **workflow**: CI gating, PR comments, team habits, compliance reporting
- This is healthy lock-in: you pay because it's valuable, not because you're trapped

---

## Magnet Prioritization

| # | Magnet | Conversion effect | Dev Effort | Priority |
|---|--------|-------------------|------------|----------|
| 1 | `init --from-trace` | Activation: 0 ‚Üí first gate | Medium | **P0** |
| 5 | PR Comment Bot | Team adoption: 1 dev ‚Üí team | Medium | **P0** |
| 4 | `generate --diff` | Trust: policy evolution visible | Low-Med | **P1** |
| 3 | `explain` with compliance hints | Upsell: free ‚Üí packs | Medium | **P1** |
| 6 | `doctor --fix` | Retention: less churn | Medium | **P2** |
| 2 | `watch` (live loop) | Stickiness: inner loop | Med-High | **P2** |

### Quick wins (< 1 day, direct impact)

| Fix | File | Impact |
|-----|------|--------|
| Remove "(skeleton)" from help text | `args.rs:5-8` | Trust |
| Fix `assay audit` ‚Üí `assay validate` in init output | `init.rs:102` | Correctness |
| Unify quickstart docs | `getting-started/` | Less confusion |
| Add compliance coverage % to baseline lint output | lint engine | "Show the gap" |

---

## Revenue Model Summary

```
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ     Enterprise Platform      ‚îÇ
                    ‚îÇ  SSO ¬∑ RBAC ¬∑ Dashboards ¬∑   ‚îÇ
                    ‚îÇ  Managed Workflows ¬∑ SIEM    ‚îÇ
                    ‚îÇ         $$$$/year            ‚îÇ
                    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
                    ‚îÇ     Compliance Packs         ‚îÇ
                    ‚îÇ  eu-ai-act-pro ¬∑ soc2-pro    ‚îÇ
                    ‚îÇ  hipaa-pro ¬∑ industry packs  ‚îÇ
                    ‚îÇ         $$$/year             ‚îÇ
                    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
                    ‚îÇ     Team (GitHub Action)     ‚îÇ ‚Üê conversion moment:
                    ‚îÇ  PR comments ¬∑ SARIF ¬∑ CI    ‚îÇ   "do we comply with AI Act?"
                    ‚îÇ  Baseline regression gating  ‚îÇ
                    ‚îÇ         FREE (OSS)           ‚îÇ
                    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
                    ‚îÇ     Individual Developer     ‚îÇ ‚Üê activation moment:
                    ‚îÇ  init ¬∑ validate ¬∑ generate  ‚îÇ   2 commands ‚Üí green checks
                    ‚îÇ  watch ¬∑ explain ¬∑ doctor    ‚îÇ
                    ‚îÇ         FREE (OSS)           ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

The core: **free is so good that teams adopt organically. Paid solves the problem that only becomes visible once you're already using the free product: "we need to make this demonstrably compliant."**
